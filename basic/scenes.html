<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Scenes | ViroReact-AR 中文文档</title>
    <meta name="description" content="the Chinese version of viro media/community documents">
    <link rel="stylesheet" href="/ViroReact-Docs-CN/assets/style.019f39fc.css">
    <link rel="modulepreload" href="/ViroReact-Docs-CN/assets/Home.6e5cf38f.js">
    <link rel="modulepreload" href="/ViroReact-Docs-CN/assets/app.551f901f.js">
    <link rel="modulepreload" href="/ViroReact-Docs-CN/assets/basic_scenes.md.933b97bc.lean.js">
    <link rel="modulepreload" href="/ViroReact-Docs-CN/assets/app.551f901f.js">
    <meta name="twitter:title" content="Scenes | ViroReact-AR 中文文档">
    <meta property="og:title" content="Scenes | ViroReact-AR 中文文档">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/ViroReact-Docs-CN/" aria-label="ViroReact-AR 中文文档, back to home" data-v-675d8756 data-v-4a583abe><!----> ViroReact-AR 中文文档</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><!----></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><!----><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item"></p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/">前言</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/getting-started/">起步</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/getting-started/quick-start">快速上手</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/getting-started/tutorial-ar">AR 教程</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">基础</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item active" href="/ViroReact-Docs-CN/basic/scenes">Scenes</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#基础场景">基础场景</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#在场景中放置对象">在场景中放置对象</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#场景背景">场景背景</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#场景-graph">场景 Graph</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/basic/scene-navigation">Scene Navigation</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/basic/input-events">输入事件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/basic/3d-objects">3d 对象</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/basic/assets">资源文件</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/basic/ui-controls-and-flexbox">UI 控件 &amp; flex 布局</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">AR</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/ar/overview">概述</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/ar/tracking-and-anchors">追踪与锚点</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/ar/interaction">交互</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/ViroReact-Docs-CN/ar/image-recognition">图像识别</a><!----></li></ul></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="scenes" tabindex="-1">Scenes <a class="header-anchor" href="#scenes" aria-hidden="true">#</a></h1><p>在 ViroReact 中，应用程序由一个个场景组成，场景由组件 <code>ViroScene</code> 或 <code>ViroARScene</code> 表示。在大多数 2D 应用程序框架中，<strong>场景</strong>的概念等同于 3D 视图。场景包含 ViroReact 在 AR/VR 中呈现的所有内容：UI 控件、3D 对象、灯光等等。</p><p>一个 使用 ViroReact 的应用程序，通常包含一个或多个场景组件（放置在 <code>ViroSceneNavigator</code> 或 <code>ViroARSceneNavigator</code> 中）。</p><h2 id="基础场景" tabindex="-1">基础场景 <a class="header-anchor" href="#基础场景" aria-hidden="true">#</a></h2><p>下面提供了一个简单的 <code>&lt;ViroScene&gt;</code> 示例。这个场景内有一个 <code>&lt;ViroText&gt;</code> 对象，显示文本为 &quot;Hello World&quot;。</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>ViroScene<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ViroText text<span class="token operator">=</span><span class="token string">&#39;Hello World&#39;</span> position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ViroScene<span class="token operator">&gt;</span>
</code></pre></div><h2 id="在场景中放置对象" tabindex="-1">在场景中放置对象 <a class="header-anchor" href="#在场景中放置对象" aria-hidden="true">#</a></h2><p>Viro 使用的坐标系统为右手坐标系，其观察方向沿负 z 轴（如下图）。可以通过修改<a href="https://docs.viromedia.com/docs/camera" target="_blank" rel="noopener noreferrer">相机</a>参数来修改观察方向和起点。相机默认设置为放置在 <code>[0, 0, 0]</code> 点 ，沿 <code>[0, 0, -1]</code> 方向观察。</p><p>在仅支持 3DOF（3 自由度）的框架（如 mobile VR）中，相机始终保持在 [0,0,0] 点，除非被开发者改动，用户只能控制相机的旋转。</p><p>支持 6DOF 的框架（如 AR ），允许用户在其真实世界中移动，相应的，Viro 场景会移动相机坐标以作为响应。</p><div style="text-align:center;"><img src="https://files.readme.io/54ce6ff-viro_camera_diagram.png" height="300"></div><p>场景中的对象通过属性 <code>position</code> 来定位在这个 3D 坐标系中。随着场景越来越复杂，在放置对象时最好使用 Viro 的底层<a href="#%E5%9C%BA%E6%99%AF%E5%9B%BE">场景图</a>。</p><h2 id="场景背景" tabindex="-1">场景背景 <a class="header-anchor" href="#场景背景" aria-hidden="true">#</a></h2><p>场景的背景是远处渲染的内容，位于所有对象的后面。背景可以是一个 360 degree image（全景图片） 或者 skybox（天空盒）。</p><p>将 360 degree image 渲染为背景，需要把 <code>&lt;Viro360Image&gt;</code> 组件添加到场景中，如下所示：</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>ViroScene style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Viro360Image source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/360_diving.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ViroScene<span class="token operator">&gt;</span>
</code></pre></div><p>要渲染天空盒，需要使用 <code>&lt;ViroSkybox&gt;</code> 组件。天空盒是一个包围着用户的有 6 个面的立方体。可以设置天空盒的<code>color</code>属性为六个面指定颜色，或者通过设置<code>origin</code>属性为每个面指定一个纹理。在下面的示例中，天空盒的每一面都分配了相同的图像。</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>ViroScene style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ViroSkybox
    source<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
      nx<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      px<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ny<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      py<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      nz<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      pz<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./res/grid_bg.jpg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">}</span>
  <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ViroScene<span class="token operator">&gt;</span>
</code></pre></div><p><code>source</code> 中的参数 nx、px、ny、py、nz 和 pz 指定每个面的纹理（其中 nx 是负 x 方向的面，px 是正 x 方向的面， 其余类似）。</p><h2 id="场景-graph" tabindex="-1">场景 Graph <a class="header-anchor" href="#场景-graph" aria-hidden="true">#</a></h2><p><code>&lt;ViroScene&gt;</code> 的底层是一个全特性支持的 3D 场景图引擎。场景图是节点的分层树结构，允许开发者直观地构建 3D 环境。其根节点就是 <code>&lt;ViroScene&gt;</code> 本身，子节点由 <code>&lt;ViroNode&gt;</code> 对象表示。每个 <code>&lt;ViroNode&gt;</code> 代表 3D 空间中的一个位置和变换，你可以将 3D 对象、灯光或其它内容与该位置绑定。</p><p><code>&lt;ViroNode&gt;</code> 并没有实质的渲染可见内容，它只代表一个坐标，即相对于其 parent <code>&lt;ViroNode&gt;</code> 节点的坐标空间变换（位置、旋转和缩放）。你可以使用多层次的 <code>&lt;ViroNode&gt;</code> 来构建你的空间场景。</p><p>例如，在下面的场景中，Text A 的最终 position 是 <code>[0, 0.9, -2]</code>，而 Text B 的最终 position 是 <code>[1, 1, -1]</code>。类似地，Text A 的最终 scale 值为 <code>[2, 2, 2]</code>，而 Text B 的最终 scale 为 [4, 4, 4]，因为它们从其 parent 节点获取 scale 值。</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>ViroScene<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ViroNode position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span> scale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ViroText text<span class="token operator">=</span><span class="token string">&#39;Text A&#39;</span> position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>ViroNode position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span> scale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>ViroText text<span class="token operator">=</span><span class="token string">&#39;Text B&#39;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ViroNode<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ViroNode<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ViroScene<span class="token operator">&gt;</span>
</code></pre></div><p>举一个更具体的例子，假设你的 APP 需要展示一个太阳系的动画视图。你可以构建一个 <code>&lt;ViroNode&gt;</code> 层次结构，来模拟天体之间的位置变动。每个物体都是一个 <code>&lt;ViroNode&gt;</code>，它在其轨道上的位置由其在 parent 坐标系中的坐标来定义。</p><p>太阳有自己的空间坐标系，地球将自己定位在该坐标系中。与此同时，地球也有自己的坐标系，月球将在其中定位自己。下面的片段展示了一个简单的太阳系：</p><div class="language-js"><pre><code><span class="token operator">&lt;</span>ViroNode position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token comment">/**sun-earth system**/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ViroSphere materials<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&#39;sunClipart&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>ViroNode position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token comment">/**moon-earth system**/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ViroSphere position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span> materials<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&#39;earth&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ViroSphere
      position<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      scale<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
      materials<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">&#39;moon&#39;</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>ViroNode<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ViroNode<span class="token operator">&gt;</span>
</code></pre></div><p>这种场景层次结构使天体动画变得很直观：月球绕地球公转和地球绕太阳公转相结合，使得月球跟随行星绕太阳公转。</p></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/ViroReact-Docs-CN/getting-started/tutorial-ar" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>AR 教程</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/ViroReact-Docs-CN/basic/scene-navigation" data-v-38ede35f><span class="text" data-v-38ede35f>Scene Navigation</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ar_image-recognition.md\":\"7a6e44dc\",\"ar_interaction.md\":\"8e260c22\",\"ar_overview.md\":\"7ade85db\",\"ar_tracking-and-anchors.md\":\"b63353d9\",\"basic_3d-objects.md\":\"73c73b59\",\"basic_assets.md\":\"64e156e0\",\"basic_input-events.md\":\"752dd794\",\"basic_scene-navigation.md\":\"841cbf18\",\"basic_scenes.md\":\"933b97bc\",\"basic_ui-controls-and-flexbox.md\":\"5c582deb\",\"getting-started_index.md\":\"f3e353a5\",\"getting-started_quick-start.md\":\"174d9032\",\"getting-started_tutorial-ar.md\":\"f35191b3\",\"index.md\":\"b8a94ea7\"}")</script>
    <script type="module" async src="/ViroReact-Docs-CN/assets/app.551f901f.js"></script>
    
  </body>
</html>